{% extends "Header_Footer.html" %}

{% block title %}Chat{% endblock %}

{% block content %}


<div class="container py-4">
  <div class="row">
    <!-- Sidebar -->
    <div class="col-md-4 mb-3">
      <div class="card">
        <div class="card-header text-center fw-bold">Contacts</div>
        <ul class="list-group list-group-flush" id="contact_list">
          <!-- <li class="list-group-item d-flex align-items-center">
            <img src="https://mdbcdn.b-cdn.net/img/Photos/Avatars/avatar-6.webp" width="40" class="rounded-circle me-2">
            <div>
              <div class="fw-bold">John Doe</div>
              <small>Online</small>
            </div>
          </li> -->
        </ul>
        
      </div>
    </div>

    <!-- Chat Area -->
    <div class="col-md-8">
      <div class="chat-box" id="chatBox">
        
        <!-- Message Left (receiver) -->
        <div class="message-row message-left">
          <img src="https://mdbcdn.b-cdn.net/img/Photos/Avatars/avatar-6.webp" alt="avatar" class="avatar">
          <div class="message-bubble message-bubble-left">
            Hi, how can I help you?
          </div>
        </div>

        <!-- Message Right (sender) -->
        <div class="message-row message-right">
          <img src="https://mdbcdn.b-cdn.net/img/Photos/Avatars/avatar-5.webp" alt="avatar" class="avatar">
          <div class="message-bubble message-bubble-right">
            I have a question about your product.
          </div>
        </div>

        <!-- Another Left -->
        <div class="message-row message-left">
          <img src="https://mdbcdn.b-cdn.net/img/Photos/Avatars/avatar-6.webp" alt="avatar" class="avatar">
          <div class="message-bubble message-bubble-left">
            Sure, please go ahead.
          </div>
        </div>

      </div>

      <!-- Message Input -->
      <form method="POST">
        <div class="input-group message-input">
          <textarea name="msg" class="form-control" placeholder="Type a message" rows="1"></textarea>
          <button class="btn btn-primary" type="submit">Send</button>
        </div>
      </form>
    </div>
  </div>
</div>


<script>
  document.addEventListener("DOMContentLoaded", function () {
    axios.get('http://127.0.0.1:8000/chat/contact/?username=amitkumar841994@gmail.com')
      .then(response => {
        console.log(">>>>>>>>>>>>>>>>>>", response.data);

        // Uncomment and adjust if your response is structured properly
        if (response.data.status_code === 200) {
          console.log(">>>>>>>>>>>>>>>>>> working",)

          for (let list of response.data.data) {
            console.log("for loop is working>>>",list)
            document.getElementById("contact_list").innerHTML += `<li class="list-group-item d-flex align-items-center" data-id="${list._id}" data-name="${list.name}">
              <img src="https://mdbcdn.b-cdn.net/img/Photos/Avatars/avatar-6.webp" width="40" class="rounded-circle me-2">
              <div>
                <div class="fw-bold">${list.name}</div>
                <small>${list._id}</small>
              </div>
            </li>`;
          }
        }
      })
      .catch(error => {
        console.error('Error during GET request:', error);
        toastfunc('red', 'An error occurred while fetching the data.');
      });
  });




</script>




{% endblock %}
